<div class="container">
  <h2>Products</h2>
  
  <div *ngIf="loading" class="loading">
    <mat-spinner></mat-spinner>
    <p>Loading products...</p>
  </div>

  <div *ngIf="error" class="error">
    {{ error }}
    <button mat-button (click)="loadProducts()">Retry</button>
  </div>

  <mat-grid-list *ngIf="!loading && !error" cols="4" rowHeight="300px" gutterSize="16px">
    <mat-grid-tile *ngFor="let product of products">
      <mat-card class="product-card">
        <img mat-card-image [src]="getImageUrl(product.imagePath)" [alt]="product.name" class="product-image">
        <mat-card-content>
          <h3>{{ product.name }}</h3>
          <p><strong>Category:</strong> {{ product.category }}</p>
          <p><strong>Code:</strong> {{ product.productCode }}</p>
          <p><strong>Price:</strong> ${{ getDiscountedPrice(product) | number:'1.2-2' }} ({{ product.discountRate }}% off)</p>
          <p><strong>Min Qty:</strong> {{ product.minimumQuantity }}</p>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>
  </mat-grid-list>
</div>